<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <title>ICH Atlas</title>

    <link
      rel="icon"
      type="image/png"
      href="../assets/favicon-96x96.png?"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg?" />
    <link rel="shortcut icon" href="../assets/favicon.ico?" />

    <link rel="stylesheet" href="../styles/style.css" />
    <link rel="stylesheet" href="../styles/modal.css" />
    <link rel="stylesheet" href="../styles/menu.css" />
    <style>
      /*custom styles here*/
    </style>

    <script src="../lib/d3.js"></script>
    <script src="../lib/d3-delaunay.js"></script>
    <script src="../lib/d3-bboxCollide.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/opentype.js@latest/dist/opentype.min.js"></script>
  </head>
  <body style="overflow: hidden">
    <!-- Navigation Menu -->
    <!-- Icons from https://phosphoricons.com/ Phosphor is a passion project by Helena Zhang and Tobias Fried. -->
    <nav id="floating-nav">
      <!-- MENU TOGGLE -->
      <button id="menu-btn" class="menu-btn" aria-label="Apri menu">
        <span class="menu-line"></div>
      </button>

      <div class="menu-items">
      <button class="icon menu-item" id="search-btn" aria-label="Cerca" data-hint="Search nodes">
        <!-- SVG search -->
      </button>

      <button
        class="icon menu-item"
        id="info-btn"
        aria-label="Info"
        data-hint="Open legend (I)"
      >
        <!-- SVG info -->
      </button>

      <button
        class="icon menu-item"
        id="download-btn-nav"
        aria-label="Download"
        data-hint="Download dataset .xlsx (D)"
      >
        <!-- Data download -->
      </button>

      <button
        class="icon menu-item"
        id="camera-btn"
        aria-label="Scarica immagine"
        data-hint="Download image .png (S)"
      >
        <!-- Screenshot -->
      </button>

      <button class="icon menu-item" id="more-btn" aria-label="Altro" data-hint="Navigate to visualisations">
        <!-- SVG more -->
      </button>
      </div>
    </nav>

    <!-- trigger nascosto per il download -->
    <a id="trigger" href="#" style="display: none"></a>

    <!-- chart-->
    <div id="chart-container"></div>

    <!-- legend modal -->
    <div id="legend-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="modal-close">&times;</span>
        <div id="modal-body-image">
          <img id="modal-img" src="" alt="Legenda">
        </div>
      </div>
    </div>

    <!-- link modal -->
    <div id="link-modal" class="modal">
      <div class="modal-content">
        <span class="close" id="modal-close">&times;</span>
        <div id="search-bar"></div>
        <div id="modal-body"></div>
      </div>
    </div>

    <script src="../scripts/modal.js"></script>
    <script src="../scripts/menu.js"></script>
    <script src="../scripts/createDigitalisationMap.js"></script>

    <script>
      let container = document.getElementById("chart-container");

      let data = "../data/comparisons-tool.csv"; //prova

      //let the dataset be downloaded
      downloadData(data, "TRAMA-digitalisation-flux-dataset.csv");
      //display dataviz
      createDigitalisationMap(container, data);
    </script>
  </body>
</html>
